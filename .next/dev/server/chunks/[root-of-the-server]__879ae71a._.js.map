{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NoLS%20Version%202.1/Downloads/card-design-system/app/api/auth/login/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport fs from \"fs\"\r\nimport path from \"path\"\r\n\r\nconst AGENTS_FILE = path.join(process.cwd(), \"data\", \"agents.json\")\r\n\r\nasync function readAgents() {\r\n  try {\r\n    const raw = await fs.promises.readFile(AGENTS_FILE, \"utf-8\")\r\n    return JSON.parse(raw)\r\n  } catch {\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json()\r\n    const { phone, password } = body\r\n    const normalize = (p = \"\") => p.replace(/\\D/g, \"\")\r\n\r\n    const adminPhone = (process.env.ADMIN_PHONE || \"0744427017\").replace(/\\D/g, \"\")\r\n    const adminPassword = process.env.ADMIN_PASSWORD || \"nyanda1316\"\r\n\r\n    if (normalize(phone) === adminPhone && password === adminPassword) {\r\n      return NextResponse.json({ ok: true, user: { id: \"admin\", name: \"NNYAMIZI STATIONERY\", phone: phone, email: \"nnyamizi@example.com\", avatar: \"/user-avatar-profile.png\" } })\r\n    }\r\n\r\n    const agents = await readAgents()\r\n    const match = agents.find((a: any) => (a.phone || \"\").replace(/\\D/g, \"\") === normalize(phone) && a.password === password)\r\n    if (match) {\r\n      return NextResponse.json({ ok: true, user: { id: match.id, name: match.name, phone: match.phone, email: match.email || \"\", avatar: match.avatar || \"/user-avatar-profile.png\" } })\r\n    }\r\n\r\n    return NextResponse.json({ ok: false }, { status: 401 })\r\n  } catch (err) {\r\n    return NextResponse.json({ ok: false, error: String(err) }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,cAAc,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAErD,eAAe;IACb,IAAI;QACF,MAAM,MAAM,MAAM,wGAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAAa;QACpD,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;QAC5B,MAAM,YAAY,CAAC,IAAI,EAAE,GAAK,EAAE,OAAO,CAAC,OAAO;QAE/C,MAAM,aAAa,CAAC,QAAQ,GAAG,CAAC,WAAW,IAAI,YAAY,EAAE,OAAO,CAAC,OAAO;QAC5E,MAAM,gBAAgB,QAAQ,GAAG,CAAC,cAAc,IAAI;QAEpD,IAAI,UAAU,WAAW,cAAc,aAAa,eAAe;YACjE,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAM,MAAM;oBAAE,IAAI;oBAAS,MAAM;oBAAuB,OAAO;oBAAO,OAAO;oBAAwB,QAAQ;gBAA2B;YAAE;QAC3K;QAEA,MAAM,SAAS,MAAM;QACrB,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAC,IAAW,CAAC,EAAE,KAAK,IAAI,EAAE,EAAE,OAAO,CAAC,OAAO,QAAQ,UAAU,UAAU,EAAE,QAAQ,KAAK;QAChH,IAAI,OAAO;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAM,MAAM;oBAAE,IAAI,MAAM,EAAE;oBAAE,MAAM,MAAM,IAAI;oBAAE,OAAO,MAAM,KAAK;oBAAE,OAAO,MAAM,KAAK,IAAI;oBAAI,QAAQ,MAAM,MAAM,IAAI;gBAA2B;YAAE;QAClL;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAM,GAAG;YAAE,QAAQ;QAAI;IACxD,EAAE,OAAO,KAAK;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO,OAAO;QAAK,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF"}}]
}